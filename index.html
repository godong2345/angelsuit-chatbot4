<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—”ì ¤ìŠˆíŠ¸ H10 ì±—ë´‡</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard-dynamic-subset.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            color: #fff;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background-color: #121212;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        h1 {
            margin: 0;
            font-size: 1.5rem;
            color: #fff;
        }
        
        .container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 300px;
            background-color: #1e1e1e;
            border-right: 1px solid #333;
            transition: transform 0.3s;
            transform: translateX(-300px);
            position: absolute;
            z-index: 10;
            height: calc(100% - 60px);
        }
        
        .sidebar.open {
            transform: translateX(0);
        }
        
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            overflow: hidden;
        }
        
        .messages {
            flex: 1;
            overflow-y: auto;
            padding-right: 1rem;
            margin-bottom: 1rem;
        }
        
        .message {
            display: flex;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #333;
            margin-right: 1rem;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }
        
        .avatar-icon {
            max-width: 25px;
            max-height: 25px;
            width: 25px;
            height: 25px;
            object-fit: contain;
        }
        
        .user-message .message-avatar {
            background-color: #555;
        }
        
        .ai-message .message-avatar {
            background-color: rgba(66,125,255,1);
        }
        
        .message-content {
            max-width: 80%;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: #2a2a2a;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .user-message .message-content {
            background-color: #333;
            margin-left: auto;
            order: 1;
        }
        
        .user-message .message-avatar {
            order: 2;
            margin-right: 0;
            margin-left: 1rem;
        }
        
        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            color: #aaa;
            font-size: 0.85rem;
        }
        
        .message-image {
            margin-top: 10px;
            border-radius: 4px;
            overflow: hidden;
            text-align: center;
        }
        
        .message-image img {
            max-width: 100%;
            display: block;
            border-radius: 4px;
            margin: 0 auto;
        }
        
        /* ì°©ìš©ë°©ë²• ì´ë¯¸ì§€ íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
        .wearing-guide-image {
            max-width: 100% !important;
            width: auto !important;
            height: auto !important;
            min-height: 250px !important;
            max-height: 80vh !important;
            object-fit: contain !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;
            margin: 10px auto !important;
            cursor: pointer !important; /* í´ë¦­ ê°€ëŠ¥í•¨ì„ í‘œì‹œ */
        }
        
        /* ëª¨ë°”ì¼ì—ì„œì˜ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        @media (max-width: 768px) {
            .wearing-guide-image {
                min-height: 200px !important;
                max-height: 70vh !important;
            }
        }
        
        .message-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .message-actions button {
            background: none;
            border: none;
            color: #aaa;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 0.25rem;
            transition: background-color 0.3s;
        }
        
        .message-actions button:hover {
            background-color: #444;
        }
        
        .chat-form {
            display: flex;
            gap: 0.5rem;
            padding: 0.8rem;
            background-color: #2a2a2a;
            border-radius: 1rem;
            align-items: center;
            margin-top: 1rem;
        }
        
        .chat-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            background-color: transparent;
            color: #fff;
            outline: none;
            height: 20px;
            border-radius: 20px;
            font-family: inherit;
            font-size: 14px;
        }
        
        .chat-form button {
            background-color: rgba(66,125,255,1);
            border: none;
            color: #fff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .chat-form button:hover {
            background-color: rgba(40,90,230,1);
        }
        
        .header-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .header-actions button {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .header-actions button:hover {
            background-color: #333;
        }
        
        .menu-button {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
            margin-right: 0.5rem;
        }
        
        .menu-button:hover {
            background-color: #333;
        }
        
        /* ì¶”ê°€: ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .message {
                margin-bottom: 1rem;
            }
            
            .message-content {
                max-width: 85%;
                padding: 0.75rem;
            }
            
            .message-avatar {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
            
            h1 {
                font-size: 1.2rem;
            }
            
            .sidebar {
                width: 280px;
                transform: translateX(-280px);
            }
            
            .chat-form {
                padding: 0.5rem;
            }
            
            .chat-input {
                padding: 0.5rem 0.75rem;
            }
        }
        
        @media (max-width: 480px) {
            .message-content {
                max-width: 90%;
                padding: 0.6rem;
                font-size: 0.95rem;
            }
            
            .message-avatar {
                width: 30px;
                height: 30px;
                margin-right: 0.5rem;
            }
            
            .avatar-icon {
                max-width: 20px !important;
                max-height: 20px !important;
                width: 20px !important;
                height: 20px !important;
            }
            
            .user-message .message-avatar {
                margin-left: 0.5rem;
            }
            
            .chat-container {
                padding: 0.5rem;
            }
            
            .header-actions button, 
            .menu-button {
                width: 35px;
                height: 35px;
            }
            
            h1 {
                font-size: 1.1rem;
            }
            
            header {
                padding: 0.75rem;
            }
            
            .chat-form {
                margin-top: 0.5rem;
            }
            
            .chat-input {
                font-size: 13px;
            }
            
            .chat-form button {
                width: 35px;
                height: 35px;
            }
        }
        
        /* í‘¸í„° ì˜ì—­ ìŠ¤íƒ€ì¼ */
        footer {
            text-align: center;
            font-size: 0.8em;
            color: #777;
            margin-top: 20px;
        }
        
        /* ì…ë ¥ í•„ë“œ í¬ì»¤ìŠ¤ ì‹œ í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ */
        #message-input:focus {
            border-color: rgba(66,125,255,1);
            box-shadow: 0 0 0 2px rgba(66,125,255,0.2);
        }
        
        .wearing-guide-text {
            text-align: center;
            color: #888;
            margin-top: 5px;
            font-size: 0.9em;
        }
        
        .manual-link {
            display: inline-block;
            background-color: #6C63FF;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            text-decoration: none;
            margin: 10px 0;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .manual-link:hover {
            background-color: #5A52E0;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <header>
        <button class="menu-button" id="menuButton">
            <span class="material-icons">menu</span>
        </button>
        <h1>ì—”ì ¤ìŠˆíŠ¸ H10 ì±—ë´‡</h1>
        <div class="header-actions">
            <button class="search-button">
                <span class="material-icons">search</span>
            </button>
            <button class="settings-button">
                <span class="material-icons">settings</span>
            </button>
        </div>
    </header>
    
    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="model-selector">
            <!-- ì‚¬ì´ë“œë°” ë‚´ìš© -->
        </aside>
        
        <div class="chat-container">
            <div id="chat-messages" class="messages"></div>
            
            <form id="chat-form" class="chat-form">
                <input type="text" id="message-input" class="chat-input" placeholder="ì—”ì ¤ìŠˆíŠ¸ H10ì— ëŒ€í•´ ì§ˆë¬¸í•˜ì„¸ìš”." autofocus>
                <button type="submit" id="send-button">
                    <span class="material-icons">send</span>
                </button>
            </form>
        </div>
    </div>
    
    <script>
        // DOM ìš”ì†Œ
        const menuButton = document.querySelector('.menu-button');
        const sidebar = document.getElementById('sidebar');
        const chatForm = document.getElementById('chat-form');
        const messageInput = document.getElementById('message-input');
        const messagesContainer = document.getElementById('chat-messages');
        
        // ë””ë²„ê·¸ ëª¨ë“œ
        const DEBUG_MODE = true;
        
        // API ì—°ê²° ì„¤ì •
        const API_URL = 'http://localhost:1234/v1/chat/completions';
        const API_HEADERS = {
            'Content-Type': 'application/json'
        };
        
        // LM Studio ì—°ê²° ìƒíƒœ
        window.LM_STUDIO_CONNECTED = true;
        
        // ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ ëª©ë¡
        window.AVAILABLE_MODELS = ["llama"];
        window.WORKING_MODEL = "llama";
        
        // ì§ˆë¬¸ ë° ë‹µë³€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜
        let qaPairs = [];
        
        // JSON íŒŒì¼ì—ì„œ Q&A ë°ì´í„° ë¡œë“œ
        async function loadQAData() {
            try {
                // ì§ì ‘ JSON ë°ì´í„° í¬í•¨
                const data = [
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–¤ ì œí’ˆì¸ê°€ìš”?",
                    "answer": "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì¼ìƒ ë³µê·€ë¥¼ ëª©í‘œë¡œ í•˜ëŠ” ì‚¬ìš©ìì˜ ë³´í–‰ ì¬í™œ í›ˆë ¨ì„ ë•ê¸° ìœ„í•´ ê°œë°œëœ ì°©ìš©í˜• ë¡œë´‡ì…ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ê¸°ë³¸ ì •ë³´"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ì£¼ëœ ì‚¬ìš© ëª©ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                    "answer": "ê·¼ìœ¡ ì¬ê±´ ë° ê´€ì ˆ ìš´ë™ ë²”ìœ„ íšŒë³µì„ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ê¸°ë³¸ ì •ë³´"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì˜ë£Œê¸°ê¸°ì¸ê°€ìš”?",
                    "answer": "ë„¤, ì˜ë£Œê¸°ê¸°(ì œì¸ 25-4093í˜¸)ë¡œ ë¶„ë¥˜ë©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ê¸°ë³¸ ì •ë³´"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–¤ í™˜ê²½ì—ì„œ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?",
                    "answer": "ë³‘ì› ë“± ì‹¤ë‚´ì˜ í‰íƒ„í•˜ê³  ì•ˆì •ì ì¸ ë°”ë‹¥ í™˜ê²½ì—ì„œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ê¸°ë³¸ ì •ë³´"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10 ì‚¬ìš© ì‹œ ê°€ì¥ ì¤‘ìš”í•œ ì•ˆì „ ìˆ˜ì¹™ì€ ë¬´ì—‡ì¸ê°€ìš”?",
                    "answer": "ë°˜ë“œì‹œ ì˜ì‚¬ì˜ ì²˜ë°© ë° ì§€ë„ í•˜ì—, ì „ë¬¸ê°€(ì˜ˆ: ë¬¼ë¦¬ì¹˜ë£Œì‚¬)ì˜ ê´€ë¦¬ ê°ë… í•˜ì—ì„œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì•ˆì „ ì£¼ì˜ì‚¬í•­"
                  },
                  {
                    "question": "ì œí’ˆ ì‚¬ìš© ì¤‘ ë„˜ì–´ì§ˆ ìœ„í—˜ì€ ì—†ë‚˜ìš”?",
                    "answer": "ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©ì—ì„œ í™˜ìê°€ ë„˜ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í•­ìƒ ì£¼ì˜í•´ì•¼ í•˜ë©°, ê°ë…ìì˜ ë³´ì¡°ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì•ˆì „ ì£¼ì˜ì‚¬í•­"
                  },
                  {
                    "question": "ì œí’ˆì„ ì„ì˜ë¡œ ë¶„í•´í•˜ê±°ë‚˜ ìˆ˜ë¦¬í•´ë„ ë˜ë‚˜ìš”?",
                    "answer": "ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤. ì„ì˜ ë¶„í•´, ìˆ˜ë¦¬, ê°œì¡°ëŠ” ê¸ˆì§€ë˜ì–´ ìˆìœ¼ë©°, ê³ ì¥ ì‹œ ì œì¡°ì‚¬ì— ë¬¸ì˜í•´ì•¼ í•©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì•ˆì „ ì£¼ì˜ì‚¬í•­"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10 ì°©ìš© ì‹œ ì–´ë–¤ ì˜·ì„ ì…ëŠ” ê²ƒì´ ì¢‹ì€ê°€ìš”?",
                    "answer": "ë•€ í¡ìˆ˜ê°€ ì˜ ë˜ëŠ” ê°€ë³ê³  í¸ì•ˆí•œ ìš´ë™ë³µ ì°©ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤. ë‘êº¼ìš´ ì˜·ì€ í”¼í•´ì£¼ì„¸ìš”.",
                    "image": null,
                    "category": "ì•ˆì „ ì£¼ì˜ì‚¬í•­"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ê¸°ë³¸ êµ¬ì„±í’ˆì€ ë¬´ì—‡ì¸ê°€ìš”?",
                    "answer": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ê¸°ë³¸ êµ¬ì„±í’ˆì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\nâ€¢ ë³¸ì²´(í•˜ë“œì›¨ì–´): êµ¬ë™ë¶€, ì„¼ì„œ, ì œì–´ì¥ì¹˜ í¬í•¨\nâ€¢ ë°°í„°ë¦¬ 2ê°œ(ë³¸ì²´ ë‚´ì¥ 1ê°œ, ì—¬ë¶„ 1ê°œ)\nâ€¢ ì¶©ì „ ìŠ¤í…Œì´ì…˜\nâ€¢ ì „ì› ì–´ëŒ‘í„°\nâ€¢ ì–´ê¹¨ ë²¨íŠ¸\nâ€¢ í—ˆë¦¬ ë²¨íŠ¸\nâ€¢ ë‹¤ë¦¬ íŒ¨ë“œ(ì¢Œ/ìš°)\nâ€¢ ì‚¬ìš©ì„¤ëª…ì„œ ë° í€µ ê°€ì´ë“œ",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  },
                  {
                    "question": "êµ¬ë™ë¶€(ì•¡ì¶”ì—ì´í„°)ëŠ” ì–´ë–¤ ì—­í• ì„ í•˜ë‚˜ìš”?",
                    "answer": "ì‚¬ìš©ìì˜ ê³ ê´€ì ˆ ì›€ì§ì„ì„ ë³´ì¡°í•˜ëŠ” í˜ì„ ìƒì„±í•˜ëŠ” í•µì‹¬ ë¶€í’ˆì…ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  },
                  {
                    "question": "ìƒíƒœ í‘œì‹œ LEDë¥¼ í†µí•´ ë¬´ì—‡ì„ ì•Œ ìˆ˜ ìˆë‚˜ìš”?",
                    "answer": "ë³´ì¡° ë ˆë²¨, ë°°í„°ë¦¬ ì”ëŸ‰, ì‘ë™ ëª¨ë“œ, ì˜¤ë¥˜ ìƒíƒœ, ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²° ìƒíƒœ ë“±ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ë¬´ê²ŒëŠ” ì–¼ë§ˆì¸ê°€ìš”?",
                    "answer": "ë°°í„°ë¦¬ë¥¼ í¬í•¨í•˜ì—¬ ì•½ 4.5kgì…ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10 ì°©ìš© ì „ì— ë¬´ì—‡ì„ ì¤€ë¹„í•´ì•¼ í•˜ë‚˜ìš”?",
                    "answer": "ëª¨ë“  ë²„í´ê³¼ ìŠ¤íŠ¸ë©ì„ í’€ê³ , ê³¨ë°˜ ë„ˆë¹„ ì¡°ì ˆ ì ê¸ˆì„ í•´ì œí•œ í›„, ë°°í„°ë¦¬ê°€ ì¶©ë¶„íˆ ì¶©ì „ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–»ê²Œ ì°©ìš©í•˜ë‚˜ìš”?",
                    "answer": "1. ëª¨ë“  ìŠ¤íŠ¸ë©ì„ í’€ê³  ê³¨ë°˜ ë„ˆë¹„ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.\n2. í—ˆë¦¬ ìŠ¤íŠ¸ë©ì„ ê³¨ë°˜ì— ë‹¨ë‹¨íˆ ê³ ì •í•©ë‹ˆë‹¤.\n3. í—ˆë²…ì§€ ë¶€ì°©ë¶€ì˜ ë§ˆê·¸ë„¤í‹± ë²„í´ì„ ì±„ìš°ê³  ìŠ¤íŠ¸ë©ì„ ì¡°ì…ë‹ˆë‹¤.\n4. ì „ì› ë²„íŠ¼ì„ 3ì´ˆ ì´ìƒ ê¸¸ê²Œ ëˆŒëŸ¬ ì „ì›ì„ ì¼­ë‹ˆë‹¤.\n5. ì•±ê³¼ ì—°ê²°í•˜ì—¬ ëª¨ë“œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n\n<a href='https://youtu.be/x0eOLwfj0ug' target='_blank' class='manual-link'>ì°©ìš© ë°©ë²• ë™ì˜ìƒ ë³´ê¸°</a>",
                    "image": "qa/wearing_guide.png",
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ì „ì›ì€ ì–´ë–»ê²Œ ì¼œë‚˜ìš”?",
                    "answer": "ì „ì›/ë¹„ìƒ ë²„íŠ¼ì„ 3ì´ˆ ì´ìƒ ê¸¸ê²Œ ëˆ„ë¥´ë©´ 'ëµë™' ì†Œë¦¬ì™€ í•¨ê»˜ ì „ì›ì´ ì¼œì§‘ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ë³´í–‰ ë³´ì¡° ëª¨ë“œëŠ” ì–´ë–»ê²Œ ì‹œì‘í•˜ë‚˜ìš”?",
                    "answer": "ì „ì›/ë¹„ìƒ ë²„íŠ¼ì„ ë¹ ë¥´ê²Œ ë‘ ë²ˆ ëˆ„ë¥´ë©´ ìŒì„± ì•ˆë‚´ì™€ í•¨ê»˜ ë³´í–‰ ë³´ì¡° ëª¨ë“œ(í°ìƒ‰ LED)ê°€ ì‹œì‘ë©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ë³´ì¡°ë ¥(ì–´ì‹œìŠ¤íŠ¸ ë ˆë²¨)ì€ ì–´ë–»ê²Œ ì¡°ì ˆí•˜ë‚˜ìš”?",
                    "answer": "ë³¸ì²´ì˜ ë³´ì¡°ë ¥ ì¡°ì ˆ ë²„íŠ¼(+,-)ì„ ì‚¬ìš©í•˜ê±°ë‚˜, ì—°ê²°ëœ ì•±(angel'a PRO)ì„ í†µí•´ 1~10ë‹¨ê³„ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ë¹„ìƒ ìƒí™© ì‹œ ê¸°ê¸°ë¥¼ ì¦‰ì‹œ ë©ˆì¶”ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”?",
                    "answer": "ì „ì›/ë¹„ìƒ ë²„íŠ¼ì„ ì§§ê²Œ í•œ ë²ˆ ëˆ„ë¥´ë©´ ì¦‰ì‹œ ëª¨ë“  ë³´ì¡° ê¸°ëŠ¥ì´ ì •ì§€ë©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ì œí’ˆ íƒˆì°©ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
                    "answer": "ì°©ìš©ì˜ ì—­ìˆœìœ¼ë¡œ í—ˆë²…ì§€ ë²„í´, í—ˆë¦¬ ë²„í´ ìˆœì„œë¡œ í’€ê³  ê³¨ë°˜ ë„ˆë¹„ë¥¼ ë„“í˜€ ë²—ìŠµë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì°©ìš© ë° ì‚¬ìš©ë²•"
                  },
                  {
                    "question": "ë°°í„°ë¦¬ëŠ” ì–¸ì œ ì¶©ì „í•´ì•¼ í•˜ë‚˜ìš”?",
                    "answer": "ê¸°ê¸° ìƒíƒœ í‘œì‹œ LEDì˜ ë°°í„°ë¦¬ í‘œì‹œë“±ì´ ë¹¨ê°„ìƒ‰ 1ì¹¸ì´ê±°ë‚˜ ê¹œë¹¡ì¼ ë•Œ ì¦‰ì‹œ êµì²´í•˜ê³  ì¶©ì „í•´ì•¼ í•©ë‹ˆë‹¤.",
                    "image": "qa/battery_charging.png",
                    "category": "ë°°í„°ë¦¬ ë° ì¶©ì „"
                  },
                  {
                    "question": "ë°°í„°ë¦¬ ì™„ì¶©ê¹Œì§€ ì‹œê°„ì€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?",
                    "answer": "ì•½ 90ë¶„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ë°°í„°ë¦¬ ë° ì¶©ì „"
                  },
                  {
                    "question": "ë°°í„°ë¦¬ë¥¼ í•œ ë²ˆ ì¶©ì „í•˜ë©´ ì–¼ë§ˆë‚˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?",
                    "answer": "í‰ê· ì ìœ¼ë¡œ ì•½ 120ë¶„(2ì‹œê°„) ì‚¬ìš© ê°€ëŠ¥í•˜ë‚˜, ë³´ì¡° ë ˆë²¨ì´ë‚˜ ì‚¬ìš© í™˜ê²½ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                    "image": null,
                    "category": "ë°°í„°ë¦¬ ë° ì¶©ì „"
                  },
                  {
                    "question": "ë°°í„°ë¦¬ ì¶©ì „ ìƒíƒœëŠ” ì–´ë–»ê²Œ í™•ì¸í•˜ë‚˜ìš”?",
                    "answer": "ì¶©ì „ ìŠ¤í…Œì´ì…˜ì˜ LED ìƒ‰ìƒìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤. ë¹¨ê°„ìƒ‰ì€ ì¶©ì „ ì¤‘, ë…¹ìƒ‰ì€ ì¶©ì „ ì™„ë£Œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ë°°í„°ë¦¬ ë° ì¶©ì „"
                  },
                  {
                    "question": "angel'a PRO ì•±ì€ ë¬´ì—‡ì„ í•˜ëŠ” ì•±ì¸ê°€ìš”?",
                    "answer": "ì—”ì ¤ìŠˆíŠ¸ H10ê³¼ ì—°ë™í•˜ì—¬ í›ˆë ¨ ì„¤ì •, ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§, ë™ì‘ ë¶„ì„, ê¸°ë¡ ê´€ë¦¬ ë“±ì„ ìˆ˜í–‰í•˜ëŠ” ì „ë¬¸ê°€ìš© ì•±ì…ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ì•± ì—°ë™"
                  },
                  {
                    "question": "ì œí’ˆ í‘œë©´ì€ ì–´ë–»ê²Œ ë‹¦ì•„ì•¼ í•˜ë‚˜ìš”?",
                    "answer": "ë¶€ë“œëŸ¬ìš´ ì²œì— ë¬¼ì´ë‚˜ ì¤‘ì„±ì„¸ì œë¥¼ ì•½ê°„ ë¬»í˜€ ë‹¦ì•„ë‚´ê³ , í•„ìš”ì‹œ ì†Œë…ìš© ì—íƒ„ì˜¬ë¡œ ì†Œë…í•©ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ê´€ë¦¬ ë° ìœ ì§€ë³´ìˆ˜"
                  },
                  {
                    "question": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ í’ˆì§ˆ ë³´ì¦ ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?",
                    "answer": "ë³¸ì²´ëŠ” êµ¬ë§¤ì¼ë¡œë¶€í„° 2ë…„, ì†Œëª¨í’ˆ(ë°°í„°ë¦¬, ì–´íŒ¨ëŸ´)ì€ 1ë…„ì…ë‹ˆë‹¤.",
                    "image": null,
                    "category": "ë³´ì¦ ë° A/S"
                  },
                  {
                    "question": "A/S ì‹ ì²­ì€ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
                    "answer": "ì—”ì ¤ë¡œë³´í‹±ìŠ¤ ê³ ê°ì„¼í„°ë‚˜ ì¹´ì¹´ì˜¤í†¡ ì±„ë„ì„ í†µí•´ ë¬¸ì˜ ë° ì ‘ìˆ˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                    "image": null,
                    "category": "ë³´ì¦ ë° A/S"
                  },
                  {
                    "question": "ì‚¬ìš©ì„¤ëª…ì„œëŠ” ì–´ë””ì„œ ë³¼ ìˆ˜ ìˆë‚˜ìš”?",
                    "answer": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ì‚¬ìš©ì„¤ëª…ì„œëŠ” ë‹¤ìŒ ë§í¬ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n<a href='qa/h10_manual.pdf' target='_blank' class='manual-link'>ì—”ì ¤ìŠˆíŠ¸ H10 ì‚¬ìš©ì„¤ëª…ì„œ ë‹¤ìš´ë¡œë“œ</a>",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  },
                  {
                    "question": "êµ¬ì„±í’ˆ",
                    "answer": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ê¸°ë³¸ êµ¬ì„±í’ˆì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\nâ€¢ ë³¸ì²´(í•˜ë“œì›¨ì–´): êµ¬ë™ë¶€, ì„¼ì„œ, ì œì–´ì¥ì¹˜ í¬í•¨\nâ€¢ ë°°í„°ë¦¬ 2ê°œ(ë³¸ì²´ ë‚´ì¥ 1ê°œ, ì—¬ë¶„ 1ê°œ)\nâ€¢ ì¶©ì „ ìŠ¤í…Œì´ì…˜\nâ€¢ ì „ì› ì–´ëŒ‘í„°\nâ€¢ ì–´ê¹¨ ë²¨íŠ¸\nâ€¢ í—ˆë¦¬ ë²¨íŠ¸\nâ€¢ ë‹¤ë¦¬ íŒ¨ë“œ(ì¢Œ/ìš°)\nâ€¢ ì‚¬ìš©ì„¤ëª…ì„œ ë° í€µ ê°€ì´ë“œ",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  },
                  {
                    "question": "ì‚¬ìš©ì„¤ëª…ì„œ",
                    "answer": "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ì‚¬ìš©ì„¤ëª…ì„œëŠ” ë‹¤ìŒ ë§í¬ì—ì„œ ë‹¤ìš´ë¡œë“œí•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n<a href='qa/h10_manual.pdf' target='_blank' class='manual-link'>ì—”ì ¤ìŠˆíŠ¸ H10 ì‚¬ìš©ì„¤ëª…ì„œ ë‹¤ìš´ë¡œë“œ</a>",
                    "image": null,
                    "category": "ì œí’ˆ êµ¬ì„±"
                  }
                ];
                
                console.log('JSON ë°ì´í„° ë¡œë“œ ì™„ë£Œ, í•­ëª© ìˆ˜:', data.length);
                
                qaPairs = data.map(item => {
                    // í‚¤ì›Œë“œ ìƒì„± - JSON íŒŒì¼ì— í‚¤ì›Œë“œê°€ ì—†ëŠ” ê²½ìš° ìë™ ìƒì„±
                    let keywords = item.keywords;
                    if (!keywords || !Array.isArray(keywords) || keywords.length === 0) {
                        // ì§ˆë¬¸ì—ì„œ ì£¼ìš” ë‹¨ì–´ ì¶”ì¶œ (2ê¸€ì ì´ìƒ, ë¶ˆìš©ì–´ ì œì™¸)
                        const stopWords = ['ì€', 'ëŠ”', 'ì´', 'ê°€', 'ì„', 'ë¥¼', 'ì—', 'ì—ì„œ', 'ì˜', 'ë¡œ', 'ìœ¼ë¡œ', 'ì™€', 'ê³¼', 'ì´ë‚˜', 'ë‚˜', 'ë°', 'ë˜ëŠ”'];
                        const questionWords = item.question.toLowerCase().replace(/[?!.,]/g, '').split(/\s+/);
                        keywords = questionWords.filter(word => 
                            word.length >= 2 && !stopWords.includes(word)
                        );
                        
                        // ì¹´í…Œê³ ë¦¬ë„ í‚¤ì›Œë“œì— ì¶”ê°€
                        if (item.category && !keywords.includes(item.category)) {
                            keywords.push(item.category);
                        }
                    }
                    
                    // ì´ë¯¸ì§€ ê²½ë¡œ í™•ì¸ ë° ì²˜ë¦¬
                    const imageLog = item.image ? `${item.image}` : 'ì´ë¯¸ì§€ ì—†ìŒ';
                    if (DEBUG_MODE) console.log(`QA í•­ëª© ë¡œë“œ: ${item.question} (ì´ë¯¸ì§€: ${imageLog})`);
                    
                    return {
                        question: item.question,
                        keywords: keywords,
                        answer: item.answer,
                        image: item.image || null,
                        category: item.category || null
                    };
                });
                
                console.log('Q&A ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', qaPairs.length + 'ê°œ í•­ëª©');
            } catch (error) {
                console.error('Q&A ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                alert('ì§ˆë¬¸-ë‹µë³€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
                
                // ê¸°ë³¸ ì§ˆë¬¸-ë‹µë³€ ë°ì´í„° ì‚¬ìš©
                qaPairs = [
                    {
                        question: "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–¤ ì œí’ˆì¸ê°€ìš”?",
                        keywords: ["ì£¼ìš”", "ê¸°ëŠ¥", "ê¸°ëŠ¥ì€", "ë­", "ë­”ê°€", "ë¬´ì—‡", "ì–´ë–¤"],
                        answer: "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì¼ìƒ ë³µê·€ë¥¼ ëª©í‘œë¡œ í•˜ëŠ” ì‚¬ìš©ìì˜ ë³´í–‰ ì¬í™œ í›ˆë ¨ì„ ë•ê¸° ìœ„í•´ ê°œë°œëœ ì°©ìš©í˜• ë¡œë´‡ì…ë‹ˆë‹¤."
                    }
                    // ê¸°ì¡´ ê¸°ë³¸ QA í˜ì–´...
                ];
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ QA ë°ì´í„° ë¡œë“œ ë° í™˜ì˜ ë©”ì‹œì§€ í‘œì‹œ
        document.addEventListener('DOMContentLoaded', async function() {
            await loadQAData();
            addMessage("ì•ˆë…•í•˜ì„¸ìš”! ì—”ì ¤ìŠˆíŠ¸ H10ì— ëŒ€í•´ ì–´ë–¤ ê²ƒì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ê¸°ë³¸ ì •ë³´, ì•ˆì „ ì£¼ì˜ì‚¬í•­, ì œí’ˆ êµ¬ì„±, ì°©ìš© ë° ì‚¬ìš©ë²•, ë°°í„°ë¦¬ ë° ì¶©ì „, ì•± ì—°ë™, ê´€ë¦¬ ë° ìœ ì§€ë³´ìˆ˜, ë³´ì¦ ë° A/S ë“±ì— ëŒ€í•´ ì§ˆë¬¸í•´ ë³´ì„¸ìš”.", true);
        });
        
        // ë©”ë‰´ ë²„íŠ¼ ì´ë²¤íŠ¸
        menuButton.addEventListener('click', function() {
            sidebar.classList.toggle('open');
        });
        
        // ì˜ì–´ ì‘ë‹µì„ í•œêµ­ì–´ì²˜ëŸ¼ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
        function koreanizeResponse(text) {
            // ì˜ì–´ ì‘ë‹µì¸ì§€ í™•ì¸ (í•œê¸€ ë¹„ìœ¨ì´ ë‚®ì€ì§€ ì²´í¬)
            const koreanChars = text.match(/[ê°€-í£]/g) || [];
            const totalChars = text.replace(/\s/g, '').length;
            const koreanRatio = totalChars > 0 ? koreanChars.length / totalChars : 0;
            
            // 30% ë¯¸ë§Œì˜ í•œê¸€ ë¹„ìœ¨ì´ë©´ ì˜ì–´ ì‘ë‹µìœ¼ë¡œ ê°„ì£¼
            const isEnglish = koreanRatio < 0.3;
            
            if (isEnglish) {
                // ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì˜ ì˜ì–´ ì‘ë‹µ ê°ì§€ ë° ê¸°ë³¸ ì‘ë‹µìœ¼ë¡œ ëŒ€ì²´
                if (text.toLowerCase().includes("sorry") || 
                    text.toLowerCase().includes("i cannot") || 
                    text.toLowerCase().includes("i don't know") ||
                    text.toLowerCase().includes("i apologize")) {
                    return {
                        text: "ì£„ì†¡í•©ë‹ˆë‹¤. ì§ˆë¬¸ì— ëŒ€í•œ ì •í™•í•œ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì§ˆë¬¸ì„ í•´ì£¼ì‹œê±°ë‚˜ ë” êµ¬ì²´ì ìœ¼ë¡œ ì§ˆë¬¸í•´ ì£¼ì„¸ìš”.",
                        isEnglish: true
                    };
                }
                
                // ì–¸ì–´ ê°ì§€ ë¡œê·¸
                if (DEBUG_MODE) console.log(`ì˜ì–´ ì‘ë‹µ ê°ì§€: í•œê¸€ ë¹„ìœ¨ ${(koreanRatio * 100).toFixed(1)}%`);
            }
            
            // ê·¸ ì™¸ì˜ ê²½ìš° ê·¸ëŒ€ë¡œ ë°˜í™˜
            return { text, isEnglish: false };
        }

        function addMessage(text, isAI, image = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isAI ? 'ai-message' : 'user-message'}`;
            
            // ë¡œë”© ë©”ì‹œì§€ ì‹ë³„ì ì¶”ê°€
            if (text === "ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì¤‘...") {
                messageDiv.classList.add('loading-message');
            }
            
            // ì´ë¯¸ì§€ URL ì²˜ë¦¬
            let imageHTML = '';
            if (image) {
                console.log(`ì´ë¯¸ì§€ URL ì²˜ë¦¬: ${image}`);
                let imgSrc = image;
                
                // ì°©ìš©ë°©ë²• ì´ë¯¸ì§€ì¸ì§€ í™•ì¸
                const isWearingGuide = imgSrc.includes('wearing_guide');
                
                // ì´ë¯¸ì§€ ê²½ë¡œ í™•ì¸ ë° ì˜¤ë¥˜ ì²˜ë¦¬ ì¶”ê°€
                imageHTML = `
                    <div class="message-image" style="margin-top: 15px; text-align: center;">
                        <img src="${imgSrc}" alt="ì°¸ê³  ì´ë¯¸ì§€" 
                            class="${isWearingGuide ? 'wearing-guide-image' : ''}"
                            style="max-width: 100%; ${isWearingGuide ? 'min-height: 250px;' : 'max-height: 300px;'} border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.2);"
                            onclick="${isWearingGuide ? 'window.open(this.src, \'_blank\')' : ''}"
                            onerror="console.error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨: ${imgSrc}'); this.style.display='none'; this.parentNode.innerHTML='<div style=\\'font-size: 0.9em; color: #888; margin: 10px 0\\'>ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>'">
                        ${isWearingGuide ? '<div style="font-size: 0.95em; color: #555; margin-top: 10px; text-align: center; font-weight: 500;">ğŸ‘† ìì„¸í•œ ì°©ìš©ë°©ë²• (ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ë©´ í¬ê²Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤)</div>' : ''}
                    </div>
                `;
            }
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    ${isAI ? '<img src="images/icons/symbol.svg" alt="AI" width="25" height="25" class="avatar-icon">' : '<span class="material-icons">person</span>'}
                </div>
                <div class="message-content">
                    <div class="message-header">
                        <span>${isAI ? 'Angel Assistant' : 'You'}</span>
                    </div>
                    <div class="message-text">${text.replace(/\n/g, '<br>')}</div>
                    ${imageHTML}
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // ë©”ì‹œì§€ ìš”ì†Œ ë°˜í™˜í•˜ì—¬ ë‚˜ì¤‘ì— ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•¨
            return messageDiv;
        }

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const message = messageInput.value.trim();
            if (!message) return;
            
            // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
            addMessage(message);
            
            // ì…ë ¥ì°½ ë¹„ìš°ê¸°
            messageInput.value = '';
            
            // ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤ ëŒë ¤ì£¼ê¸°
            messageInput.focus();
            
            try {
                // ì…ë ¥ ë©”ì‹œì§€ ì •ê·œí™”
                const userInput = message.toLowerCase().replace(/[?!.,]/g, '').trim();
                
                // ì§ì ‘ ì‘ë‹µì´ ê°€ëŠ¥í•œ ê²½ìš° (ì¤‘ìš” í‚¤ì›Œë“œ ê¸°ë°˜)
                let directAnswer = null;
                
                // ì¸ì‚¬ë§
                if (userInput.includes('ì•ˆë…•') || userInput.includes('í•˜ì´') || userInput.includes('ë°˜ê°€')) {
                    directAnswer = "ì•ˆë…•í•˜ì„¸ìš”! ì—”ì ¤ìŠˆíŠ¸ H10ì— ëŒ€í•´ ë¬´ì—‡ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?";
                }
                
                // í™ˆí˜ì´ì§€ ê´€ë ¨ ì§ˆë¬¸ì— ì¦‰ì‹œ ì‘ë‹µ
                else if (userInput.includes('í™ˆí˜ì´ì§€') || userInput.includes('ì›¹ì‚¬ì´íŠ¸') || userInput.includes('ì‚¬ì´íŠ¸') || 
                    userInput.includes('ì£¼ì†Œ') || userInput.includes('url') || userInput.includes('ì ‘ì†') || 
                    (userInput.includes('ì–´ë””') && (userInput.includes('ê°€') || userInput.includes('ë³´') || userInput.includes('ì°¾')))) {
                    directAnswer = "ì—”ì ¤ë¡œë³´í‹±ìŠ¤ ê³µì‹ í™ˆí˜ì´ì§€ ì£¼ì†ŒëŠ” https://www.angel-robotics.com/ko ì…ë‹ˆë‹¤. í™ˆí˜ì´ì§€ì—ì„œ ì œí’ˆ ì •ë³´, êµ¬ë§¤ ì•ˆë‚´, ê³ ê° ì§€ì› ë“± ë‹¤ì–‘í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                }
                
                // ê°„ë‹¨í•œ ì§ˆë¬¸ íŒ¨í„´ ì¸ì‹ - í•µì‹¬ ì£¼ì œë³„ë¡œ ë§¤ì¹­
                else {
                    // ê°„ë‹¨í•œ ì§ˆë¬¸ íŒ¨í„´ë³„ ë§¤í•‘
                    const simplePatterns = [
                        { 
                            keywords: ['ë¬´ê²Œ', 'ëª‡í‚¤ë¡œ', 'ì–¼ë§ˆë‚˜ ë¬´ê±°', 'ë¬´ê²ŒëŠ”', 'ì–¼ë§ˆë‚˜ ë‚˜ê°€', 'ëª‡kg', 'ë¬´ê²Œê°€'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ë¬´ê²ŒëŠ” ì–¼ë§ˆì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['ê°€ê²©', 'ë¹„ìš©', 'ì–¼ë§ˆ', 'ê¸ˆì•¡', 'êµ¬ë§¤', 'ì‚´', 'êµ¬ì…'], 
                            question: "ê°€ê²©ì´ ì–¼ë§ˆì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['ë°°í„°ë¦¬', 'ì¶©ì „', 'ì „ì›', 'ì–¼ë§ˆë‚˜ ì‚¬ìš©'], 
                            question: "ë°°í„°ë¦¬ë¥¼ í•œ ë²ˆ ì¶©ì „í•˜ë©´ ì–¼ë§ˆë‚˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?" 
                        },
                        { 
                            keywords: ['ì°©ìš©', 'ì“°', 'ì…', 'ì¥ì°©', 'ì´ìš©'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–»ê²Œ ì°©ìš©í•˜ë‚˜ìš”?" 
                        },
                        { 
                            keywords: ['ê¸°ëŠ¥', 'íŠ¹ì§•', 'ì¥ì ', 'ë­', 'ì–´ë–¤', 'ì œí’ˆ', 'ë­”'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–¤ ì œí’ˆì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['ë³´ì¦', 'AS', 'A/S', 'ìˆ˜ë¦¬', 'ê³ ì¥', 'ê¸°ê°„'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ í’ˆì§ˆ ë³´ì¦ ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?" 
                        },
                        { 
                            keywords: ['ì•±', 'ì–´í”Œ', 'ì—°ê²°', 'ë™ê¸°í™”', 'ì—°ë™', 'ìŠ¤ë§ˆíŠ¸í°', 'í°'], 
                            question: "angel'a PRO ì•±ì€ ë¬´ì—‡ì„ í•˜ëŠ” ì•±ì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['ì¬ì§ˆ', 'ì†Œì¬', 'ë¬´ì—‡ìœ¼ë¡œ', 'ë§Œë“¤', 'ë­ë¡œ'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì˜ë£Œê¸°ê¸°ì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['ì£¼ì˜', 'ì•ˆì „', 'ìœ„í—˜', 'ì¡°ì‹¬', 'ì£¼ì˜ì‚¬í•­'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10 ì‚¬ìš© ì‹œ ê°€ì¥ ì¤‘ìš”í•œ ì•ˆì „ ìˆ˜ì¹™ì€ ë¬´ì—‡ì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['êµ¬ì„±í’ˆ', 'êµ¬ì„±', 'í¬í•¨', 'íŒ¨í‚¤ì§€', 'ì„¸íŠ¸', 'ë°•ìŠ¤'], 
                            question: "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ê¸°ë³¸ êµ¬ì„±í’ˆì€ ë¬´ì—‡ì¸ê°€ìš”?" 
                        },
                        { 
                            keywords: ['ì‚¬ìš©ì„¤ëª…ì„œ', 'ë§¤ë‰´ì–¼', 'ë©”ë‰´ì–¼', 'ì„¤ëª…ì„œ', 'ë‹¤ìš´ë¡œë“œ', 'ë‹¤ìš´'], 
                            question: "ì‚¬ìš©ì„¤ëª…ì„œëŠ” ì–´ë””ì„œ ë³¼ ìˆ˜ ìˆë‚˜ìš”?" 
                        }
                    ];
                    
                    // ê°„ë‹¨í•œ ì§ˆë¬¸ íŒ¨í„´ ë§¤ì¹­
                    const userWords = userInput.split(/\s+/);
                    
                    // 1. íŠ¹ìˆ˜ ì¼€ì´ìŠ¤: ê·¹ë‹¨ì ìœ¼ë¡œ ì§§ì€ ì§ˆë¬¸ (1-2ë‹¨ì–´)
                    if (userWords.length <= 2) {
                        // ê°€ê²© í™•ì¸
                        if (userInput === "ê°€ê²©" || userInput === "ì–¼ë§ˆ" || userInput === "ë¹„ìš©") {
                            const priceQA = qaPairs.find(qa => qa.question === "ê°€ê²©ì´ ì–¼ë§ˆì¸ê°€ìš”?");
                            if (priceQA) {
                                console.log(`ì´ˆë‹¨ìˆœ ì§ˆë¬¸ ë§¤ì¹­: "${userInput}" -> "ê°€ê²©ì´ ì–¼ë§ˆì¸ê°€ìš”?"`);
                                addMessage(priceQA.answer, true, priceQA.image);
                                return;
                            }
                        }
                        
                        // ë¬´ê²Œ í™•ì¸
                        if (userInput === "ë¬´ê²Œ" || userInput === "ëª‡í‚¤ë¡œ" || userInput === "ë¬´ê²ŒëŠ”") {
                            const weightQA = qaPairs.find(qa => qa.question === "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ë¬´ê²ŒëŠ” ì–¼ë§ˆì¸ê°€ìš”?");
                            if (weightQA) {
                                console.log(`ì´ˆë‹¨ìˆœ ì§ˆë¬¸ ë§¤ì¹­: "${userInput}" -> "ë¬´ê²Œ ì§ˆë¬¸"`);
                                addMessage(weightQA.answer, true, weightQA.image);
                                return;
                            }
                        }
                        
                        // ë°°í„°ë¦¬ í™•ì¸
                        if (userInput === "ë°°í„°ë¦¬" || userInput === "ì¶©ì „") {
                            const batteryQA = qaPairs.find(qa => qa.question === "ë°°í„°ë¦¬ë¥¼ í•œ ë²ˆ ì¶©ì „í•˜ë©´ ì–¼ë§ˆë‚˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?");
                            if (batteryQA) {
                                console.log(`ì´ˆë‹¨ìˆœ ì§ˆë¬¸ ë§¤ì¹­: "${userInput}" -> "ë°°í„°ë¦¬ ì§ˆë¬¸"`);
                                addMessage(batteryQA.answer, true, batteryQA.image);
                                return;
                            }
                        }
                        
                        // ì°©ìš©ë²• í™•ì¸
                        if (userInput === "ì°©ìš©" || userInput === "ë°©ë²•" || userInput === "ì–´ë–»ê²Œ" || 
                            userInput === "ì°©ìš©ë°©ë²•" || userInput === "ì“°ëŠ”ë²•" || userInput === "ì‚¬ìš©ë²•") {
                            const wearingQA = qaPairs.find(qa => qa.question === "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–»ê²Œ ì°©ìš©í•˜ë‚˜ìš”?");
                            if (wearingQA) {
                                console.log(`ì°©ìš©ë²• ì§ˆë¬¸ ë§¤ì¹­ ì„±ê³µ, ì´ë¯¸ì§€: ${wearingQA.image}`);
                                addMessage(wearingQA.answer, true, wearingQA.image);
                                return;
                            }
                        }
                    }
                    
                    // 2. ì§§ì€ ì§ˆë¬¸ íŒ¨í„´ ë§¤ì¹­ (3ë‹¨ì–´ ì´í•˜)
                    if (userWords.length <= 3) {
                        // ì œí’ˆ êµ¬ì„±í’ˆ ì§ˆë¬¸ ì²˜ë¦¬ (ì˜ˆ: "ì œí’ˆ êµ¬ì„±í’ˆì€?", "êµ¬ì„±í’ˆì€?", "êµ¬ì„±í’ˆ")
                        if (userInput.includes('êµ¬ì„±í’ˆ') || 
                            (userInput.includes('êµ¬ì„±') && userInput.includes('í’ˆ')) ||
                            (userInput.includes('ì œí’ˆ') && userInput.includes('êµ¬ì„±'))) {
                            console.log("ì œí’ˆ êµ¬ì„±í’ˆ ì§ˆë¬¸ ê°ì§€");
                            const componentsQA = qaPairs.find(qa => qa.question === "ì—”ì ¤ìŠˆíŠ¸ H10ì˜ ê¸°ë³¸ êµ¬ì„±í’ˆì€ ë¬´ì—‡ì¸ê°€ìš”?");
                            if (componentsQA) {
                                console.log(`êµ¬ì„±í’ˆ ì§ˆë¬¸ ë§¤ì¹­ ì„±ê³µ`);
                                addMessage(componentsQA.answer, true, componentsQA.image);
                                return;
                            }
                        }
                        
                        for (const pattern of simplePatterns) {
                            for (const keyword of pattern.keywords) {
                                if (userInput.includes(keyword)) {
                                    // ì¼ì¹˜í•˜ëŠ” íŒ¨í„´ì„ ì°¾ìœ¼ë©´ í•´ë‹¹ ì§ˆë¬¸ì— ë§¤í•‘ëœ ë‹µë³€ ì°¾ê¸°
                                    const matchedQA = qaPairs.find(qa => qa.question === pattern.question);
                                    if (matchedQA) {
                                        console.log(`ë‹¨ìˆœ ì§ˆë¬¸ íŒ¨í„´ ë§¤ì¹­: "${userInput}" -> "${pattern.question}"`);
                                        addMessage(matchedQA.answer, true, matchedQA.image);
                                        return;
                                    }
                                }
                            }
                        }
                    }
                }
                
                // ì°©ìš©ë²• ê´€ë ¨ ì§ˆë¬¸ì— ì¦‰ì‹œ ì‘ë‹µ
                if (userInput.includes('ì°©ìš©') || userInput.includes('ë°©ë²•') || userInput.includes('ì‚¬ìš©ë²•') || 
                    userInput.includes('ì“°ëŠ”ë²•') || userInput.includes('ì°©ìš©ë²•') || userInput.includes('ì–´ë–»ê²Œ')) {
                    console.log("ì°©ìš©ë²• ê´€ë ¨ ì§ˆë¬¸ ê°ì§€");
                    // ì°©ìš© ë°©ë²• ì§ˆë¬¸ ë§¤ì¹­
                    const wearingQA = qaPairs.find(qa => qa.question === "ì—”ì ¤ìŠˆíŠ¸ H10ì€ ì–´ë–»ê²Œ ì°©ìš©í•˜ë‚˜ìš”?");
                    if (wearingQA) {
                        console.log(`ì°©ìš©ë²• ì§ˆë¬¸ ë§¤ì¹­ ì„±ê³µ, ì´ë¯¸ì§€: ${wearingQA.image}`);
                        addMessage(wearingQA.answer, true, wearingQA.image);
                        return;
                    }
                }
                
                if (directAnswer) {
                    // ì¦‰ì‹œ ì‘ë‹µì´ ê°€ëŠ¥í•œ ê²½ìš°
                    addMessage(directAnswer, true);
                    return;
                }
                
                // ì¦‰ì‹œ ì‘ë‹µì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš° ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
                const loadingMsgElement = addMessage("ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì¤‘...", true);
                
                try {
                    // ë¡œë”© ë©”ì‹œì§€ë¥¼ ì œê±°í•˜ê³  ë¯¸ë¦¬ ì •ì˜ëœ ì§ˆë¬¸-ë‹µë³€ ìŒì—ì„œ ê°€ì¥ ì í•©í•œ ë‹µë³€ ì°¾ê¸°
                    setTimeout(() => {
                        // ë¡œë”© ë©”ì‹œì§€ ì œê±° - ëª¨ë“  ë¡œë”© ë©”ì‹œì§€ë¥¼ ì°¾ì•„ ì œê±°
                        const loadingMessages = messagesContainer.querySelectorAll('.loading-message');
                        loadingMessages.forEach(msg => messagesContainer.removeChild(msg));
                        
                        // ë¯¸ë¦¬ ì •ì˜ëœ ì§ˆë¬¸-ë‹µë³€ ìŒì—ì„œ ê°€ì¥ ì í•©í•œ ë‹µë³€ ì°¾ê¸°
                        let bestMatch = null;
                        let bestImage = null;
                        let highestScore = 0;
                        
                        for (const qa of qaPairs) {
                            let matchScore = 0;
                            
                            // ë‹¨ìˆœ ì§ˆë¬¸ ì²˜ë¦¬ - ì§ˆë¬¸ì´ ë§¤ìš° ì§§ì€ ê²½ìš° (5ë‹¨ì–´ ì´í•˜) ì •í™•í•œ í‚¤ì›Œë“œ ë§¤ì¹­ì— ê°€ì¤‘ì¹˜ ë¶€ì—¬
                            const userWords = userInput.split(/\s+/);
                            const isSimpleQuestion = userWords.length <= 5;
                            
                            // ì£¼ìš” í‚¤ì›Œë“œ ë§¤ì¹­ (ê°€ì¤‘ì¹˜ 2)
                            for (const keyword of qa.keywords) {
                                if (userInput.includes(keyword)) {
                                    // ì§§ì€ ì§ˆë¬¸ì—ì„œëŠ” í•µì‹¬ í‚¤ì›Œë“œ ë§¤ì¹­ì— ë” ë†’ì€ ê°€ì¤‘ì¹˜ ë¶€ì—¬
                                    matchScore += isSimpleQuestion ? 3 : 2;
                                    
                                    // ì •í™•í•œ í‚¤ì›Œë“œ ë§¤ì¹­ (ì˜ˆ: "ë°°í„°ë¦¬"ë¼ëŠ” ë‹¨ì–´ê°€ ì •í™•íˆ ì¼ì¹˜)
                                    if (userWords.includes(keyword)) {
                                        matchScore += isSimpleQuestion ? 2 : 1;
                                    }
                                }
                            }
                            
                            // ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ (ì¶”ê°€ ê°€ì¤‘ì¹˜)
                            if (qa.category) {
                                const categoryWords = qa.category.toLowerCase().split(/\s+/);
                                for (const word of categoryWords) {
                                    if (userInput.includes(word)) {
                                        matchScore += 1.5;
                                    }
                                }
                            }
                            
                            // ì¶”ê°€ í‚¤ì›Œë“œ ë§¤ì¹­ (ì§ˆë¬¸ì—ì„œ ì¶”ì¶œí•œ ë‹¨ì–´ë“¤)
                            const questionWords = qa.question.toLowerCase().replace(/[?!.,]/g, '').split(/\s+/);
                            for (const word of questionWords) {
                                if (word.length > 1 && userInput.includes(word)) {
                                    matchScore += 1;
                                    
                                    // ì§§ì€ ë‹¨ì–´ ì •í™•íˆ ë§¤ì¹­ë˜ëŠ” ê²½ìš° ì¶”ê°€ ê°€ì¤‘ì¹˜
                                    // (ì˜ˆ: "ì „ì›", "ì•±" ë“± ì¤‘ìš” ë‹¨ì–´)
                                    if (word.length <= 3 && userWords.includes(word)) {
                                        matchScore += 1.5;
                                    }
                                }
                            }
                            
                            // ì§ˆë¬¸ì˜ ì²« ë¶€ë¶„ì— ë” ë†’ì€ ê°€ì¤‘ì¹˜ ë¶€ì—¬
                            // (ì˜ˆ: "ë¬´ê²Œê°€ ì–¼ë§ˆì¸ê°€ìš”?"ì™€ ê°™ì€ ì§ˆë¬¸ì—ì„œ "ë¬´ê²Œ"ëŠ” ë§¤ìš° ì¤‘ìš”)
                            const firstWords = qa.question.toLowerCase().replace(/[?!.,]/g, '').split(/\s+/).slice(0, 3);
                            for (const word of firstWords) {
                                if (word.length > 1 && userInput.includes(word)) {
                                    matchScore += 1;
                                }
                            }
                            
                            // ìµœê³  ì ìˆ˜ ì—…ë°ì´íŠ¸
                            if (matchScore > highestScore) {
                                highestScore = matchScore;
                                bestMatch = qa.answer;
                                bestImage = qa.image;
                            }
                        }
                        
                        // ì ì ˆí•œ ì‘ë‹µ ì°¾ê¸°
                        if (highestScore >= 2) {
                            // ì¶©ë¶„íˆ ê´€ë ¨ì„± ìˆëŠ” ë‹µë³€ ì°¾ìŒ
                            addMessage(bestMatch, true, bestImage);
                        } else {
                            // ê´€ë ¨ì„± ìˆëŠ” ë‹µë³€ì„ ì°¾ì§€ ëª»í•¨
                            addMessage("ì£„ì†¡í•©ë‹ˆë‹¤. ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì£¼ìš” ê¸°ëŠ¥, ë°°í„°ë¦¬, ì°©ìš© ë°©ë²• ë“±ì— ëŒ€í•´ ì§ˆë¬¸í•´ ë³´ì„¸ìš”.", true);
                        }
                    }, 1000);
                } catch (error) {
                    console.error("API í˜¸ì¶œ ì˜¤ë¥˜:", error);
                    
                    // ë¡œë”© ë©”ì‹œì§€ ì œê±° - ëª¨ë“  ë¡œë”© ë©”ì‹œì§€ë¥¼ ì°¾ì•„ ì œê±°
                    const loadingMessages = messagesContainer.querySelectorAll('.loading-message');
                    loadingMessages.forEach(msg => messagesContainer.removeChild(msg));
                    
                    // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ ì‘ë‹µ
                    addMessage("ì£„ì†¡í•©ë‹ˆë‹¤. ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.", true);
                }
            } catch (error) {
                console.error("ì „ì²´ ì²˜ë¦¬ ì˜¤ë¥˜:", error);
                addMessage("ì£„ì†¡í•©ë‹ˆë‹¤. ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.", true);
            }
        });

        // ì—”í„°í‚¤ ì²˜ë¦¬ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        messageInput.addEventListener('keydown', function(e) {
            // ì—”í„°í‚¤ê°€ ëˆŒë ¸ì„ ë•Œ í¼ ì œì¶œ
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                chatForm.dispatchEvent(new Event('submit'));
            }
        });
    </script>
</body>
</html> 